(self.webpackChunkweather_forecast=self.webpackChunkweather_forecast||[]).push([[114],{114:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DetailsModule:()=>R});var r=n(3065),i=n(8583),a=n(6983),o=n(7716);let s=(()=>{class e{constructor(e){this.router=e}canActivate(e,t){return!(!e.queryParams.lat||!e.queryParams.lon)||this.router.createUrlTree([""])}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(a.F0))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e})();var c=n(9765),l=n(6782);const d=(0,r.PH)("[Details] Load Weather Details"),p=(0,r.PH)("[Details] Load Weather Details Success",(0,r.Ky)()),u=(0,r.PH)("[Details] Load Weather Details Failed"),g=(0,r.ZF)("details"),h=(0,r.P1)(g,e=>e.entity),m=(0,r.P1)(g,e=>e.loading),f=(0,r.P1)(g,e=>e.error);var w=n(6602),y=n(605),v=n(5054),x=n(8813),Z=n(4663),_=n(7797);let O=(()=>{class e{get getTitle(){var e,t;return`${null===(e=this.current)||void 0===e?void 0:e.city.name} - ${null===(t=this.current)||void 0===t?void 0:t.city.country}`}get imageURL(){var e,t;const n=null!==(t=null===(e=this.current)||void 0===e?void 0:e.weather.icon.split(".")[0])&&void 0!==t?t:"default";return(0,x.k)(n)}get weatherIcon(){return`http://openweathermap.org/img/wn/${this.current.weather.icon}@2x.png`}get temperature(){var e;return`${null===(e=this.current)||void 0===e?void 0:e.weather.temp.toFixed(1)} ${(0,Z._)(this.unit)}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-current-weather-details"]],inputs:{current:"current",unit:"unit"},decls:11,vars:9,consts:[[1,"current-weather"],[1,"title"],[1,"description"],["alt","weather",3,"src"],[3,"unit","moreInfo","cityWeather"]],template:function(e,t){if(1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"span",1),o.TgZ(2,"h1"),o._uU(3),o.qZA(),o.TgZ(4,"h2"),o._uU(5),o.qZA(),o.qZA(),o.TgZ(6,"figure",2),o._UZ(7,"img",3),o.TgZ(8,"figcaption"),o._uU(9),o.qZA(),o.qZA(),o._UZ(10,"app-weather-details-row",4),o.qZA()),2&e){let e;o.Akn("background:linear-gradient(0deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)),\n             url("+t.imageURL+");\n             background-attachment: fixed;\n             background-size: cover; background-position: center;"),o.xp6(3),o.hij("",t.getTitle," "),o.xp6(2),o.Oqu(t.temperature),o.xp6(2),o.Q6J("src",t.weatherIcon,o.LSH),o.xp6(2),o.Oqu(null!==(e=null==t.current.weather?null:t.current.weather.description)&&void 0!==e?e:""),o.xp6(1),o.Q6J("unit",t.unit)("moreInfo",!0)("cityWeather",t.current)}},directives:[_.J],styles:[".current-weather[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:1rem;gap:1rem;width:100vw;padding:2rem 4rem}.title[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem;font-weight:400;margin-bottom:2rem}.description[_ngcontent-%COMP%]{font-size:1.2rem;margin-left:.5rem;text-transform:capitalize}.description[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translateY(10px);width:5.5rem}@media (max-width:768px){.current-weather[_ngcontent-%COMP%]{padding:2rem 0 1rem;text-align:center}.title[_ngcontent-%COMP%]{padding:0 1rem}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}}"],changeDetection:0}),e})();var P=n(1412),M=n(6474);let C=(()=>{class e{get weather(){return this.dailyWeather.weather}get icon(){return`http://openweathermap.org/img/wn/${this.weather.icon}@2x.png`}get day(){return P.unix(this.dailyWeather.date).format("DD")}get month(){return P.unix(this.dailyWeather.date).format("MMMM")}unixToMinute(e){return P.unix(e).tz(this.timeZone).format("HH:mm")}getTemperature(e){return`${null==e?void 0:e.toFixed(1)} ${(0,Z._)(this.unit)}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-daily-weather-details"]],inputs:{unit:"unit",dailyWeather:"dailyWeather",timeZone:"timeZone"},decls:14,vars:9,consts:[[1,"daily-card"],[1,"date"],["alt","sky view",3,"src"],[1,"weather-row"],["icon","wind.png","infoType","wind speed",3,"info"],["icon","humidity.png","infoType","humidity",3,"info"],["icon","min.png","infoType","Lowest Temperature",3,"info"],["icon","max.png","infoType","Higehst Temperature",3,"info"],["icon","sunrise.png","infoType","Sunrise hour",3,"info"],["icon","sunset.png","infoType","Sunset hour",3,"info"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"span",1),o.TgZ(2,"h3"),o._uU(3),o.qZA(),o.TgZ(4,"p"),o._uU(5),o.qZA(),o._UZ(6,"img",2),o.qZA(),o.TgZ(7,"div",3),o._UZ(8,"app-details-weather",4),o._UZ(9,"app-details-weather",5),o._UZ(10,"app-details-weather",6),o._UZ(11,"app-details-weather",7),o._UZ(12,"app-details-weather",8),o._UZ(13,"app-details-weather",9),o.qZA(),o.qZA()),2&e&&(o.xp6(3),o.Oqu(t.day),o.xp6(2),o.Oqu(t.month),o.xp6(1),o.Q6J("src",t.icon,o.LSH),o.xp6(2),o.Q6J("info",t.weather.wind.speed+"m/s"),o.xp6(1),o.Q6J("info",t.weather.humidity+"%"),o.xp6(1),o.Q6J("info",t.getTemperature(t.weather.minTemp)),o.xp6(1),o.Q6J("info",t.getTemperature(t.weather.maxTemp)),o.xp6(1),o.Q6J("info",t.unixToMinute(t.weather.sunrise)),o.xp6(1),o.Q6J("info",t.unixToMinute(t.weather.sunset)))},directives:[M.z],styles:[".daily-card[_ngcontent-%COMP%]{width:100%;padding:1rem;box-shadow:var(--card-shadow);background-color:var(--background-color);border-left:1rem solid var(--light-blue-color);transition:.3s;color:var(--body-font-color);display:flex;grid-gap:1rem 2rem;gap:1rem 2rem;flex-wrap:wrap;justify-content:space-evenly;align-items:center}.daily-card[_ngcontent-%COMP%]:hover{border-left-color:var(--blue-hover-color)}.date[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{position:absolute;left:-15%;top:-30%;z-index:0;filter:drop-shadow(.5rem .5rem 1rem #0000005d)}.date[_ngcontent-%COMP%]{padding:1rem;position:relative;text-align:center;font-size:2rem}.date[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:200}.weather-row[_ngcontent-%COMP%]{flex-grow:0.5;padding:1rem;height:50%;display:flex;justify-content:space-evenly;align-items:center;color:var(--body-font-color);border-radius:0 0 .3rem .3rem;overflow-x:auto}@media (max-width:1024px){.daily-card[_ngcontent-%COMP%]{width:78vw;padding:1.4rem}.date[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;width:100%}.date[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{top:0;left:0}.weather-row[_ngcontent-%COMP%]{padding-bottom:2rem;grid-gap:1rem;gap:1rem;justify-content:normal}}@media (max-width:468px){.date[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{top:-20%;left:-5%}}"],changeDetection:0}),e})();function b(e,t){1&e&&o._UZ(0,"app-loader")}function T(e,t){1&e&&o._UZ(0,"app-error")}function $(e,t){if(1&e&&(o.TgZ(0,"main",2),o.YNc(1,b,1,0,"app-loader",3),o.ALo(2,"async"),o.YNc(3,T,1,0,"app-error",3),o.ALo(4,"async"),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",o.lcZ(2,2,e.loading$)),o.xp6(2),o.Q6J("ngIf",o.lcZ(4,4,e.error$))}}function A(e,t){if(1&e&&(o._UZ(0,"app-daily-weather-details",7),o.ALo(1,"async"),o.ALo(2,"async")),2&e){const e=t.$implicit,n=o.oxw(2);let r;o.Q6J("dailyWeather",e)("timeZone",(null==(r=o.lcZ(1,3,n.details$))?null:r.city).timeZone)("unit",o.lcZ(2,5,n.unit$))}}function q(e,t){if(1&e&&(o._UZ(0,"app-current-weather-details",4),o.ALo(1,"async"),o.TgZ(2,"div",5),o.YNc(3,A,3,7,"app-daily-weather-details",6),o.ALo(4,"async"),o.qZA()),2&e){const e=o.oxw();o.Q6J("unit",o.lcZ(1,3,e.unit$))("current",e.current),o.xp6(3),o.Q6J("ngForOf",o.lcZ(4,5,e.details$).daily)}}let L=(()=>{class e{constructor(e){this.store=e,this.componentDestroyed$=new c.xQ}ngOnInit(){this.store.dispatch(d()),this.error$=this.store.pipe((0,r.Ys)(f)),this.details$=this.store.pipe((0,r.Ys)(h)),this.loading$=this.store.pipe((0,r.Ys)(m)),this.details$.pipe((0,l.R)(this.componentDestroyed$)).subscribe(e=>e?this.current={city:e.city,weather:e.current}:void 0),this.unit$=this.store.pipe((0,r.Ys)(w.g))}ngOnDestroy(){this.componentDestroyed$.next(),this.componentDestroyed$.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.yh))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-details"]],decls:5,vars:6,consts:[["class","center",4,"ngIf","ngIfElse"],["notLoading",""],[1,"center"],[4,"ngIf"],[3,"unit","current"],[1,"list-weather"],[3,"dailyWeather","timeZone","unit",4,"ngFor","ngForOf"],[3,"dailyWeather","timeZone","unit"]],template:function(e,t){if(1&e&&(o.YNc(0,$,5,6,"main",0),o.ALo(1,"async"),o.ALo(2,"async"),o.YNc(3,q,5,7,"ng-template",null,1,o.W1O)),2&e){const e=o.MAs(4);o.Q6J("ngIf",o.lcZ(1,2,t.loading$)||o.lcZ(2,4,t.error$))("ngIfElse",e)}},directives:[i.O5,y.R,v.Z,O,i.sg,C],pipes:[i.Ov],styles:["main[_ngcontent-%COMP%]{min-height:100vh}.list-weather[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;grid-gap:4rem;gap:4rem;padding:7rem}@media (max-width:768px){.list-weather[_ngcontent-%COMP%]{padding:7rem 2rem}}"]}),e})();const U=(0,r.Lq)({entity:void 0,loading:!1,error:!1},(0,r.on)(d,e=>Object.assign(Object.assign({},e),{entity:void 0,loading:!0,error:!1})),(0,r.on)(p,(e,{entity:t})=>Object.assign(Object.assign({},e),{entity:t,loading:!1})),(0,r.on)(u,e=>Object.assign(Object.assign({},e),{loading:!1,error:!0})));function W(e,t){return U(e,t)}var D=n(1601),J=n(9112),Q=n(7057),F=n(9773),j=n(5304),k=n(8002);const z=(0,r.ZF)("router"),Y=(0,r.P1)(z,e=>{var t;return null!==(t=null==e?void 0:e.state)&&void 0!==t?t:{}}),I=(0,r.P1)(Y,e=>{var t;return null!==(t=null==e?void 0:e.queryParams)&&void 0!==t?t:{}});var H=n(2394);let S=(()=>{class e{constructor(e,t,n){this.actions$=e,this.store=t,this.service=n,this.loadCurrentWeather$=(0,D.GW)(()=>this.actions$.pipe((0,D.l4)(d),(0,Q.M)(this.store.pipe((0,r.Ys)(I))),(0,F.zg)(([,e])=>(0,J.aj)([this.service.getCityWeatherByCoord(e.lat,e.lon),this.service.getWeatherDetails(e.lat,e.lon)])),(0,j.K)((e,t)=>(this.store.dispatch(u()),t)),(0,k.U)(([e,t])=>{const n=t;return n.city=Object.assign(Object.assign({},e.city),{timeZone:t.city.timeZone}),p({entity:n})})))}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(D.eX),o.LFG(r.yh),o.LFG(H.F))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e})();var G=n(5626),N=n(3134);let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[s],imports:[[i.ez,N.q,G.K,r.Aw.forFeature("details",W),D.sQ.forFeature([S]),a.Bz.forChild([{path:"",component:L,canActivate:[s]}])]]}),e})()}}]);